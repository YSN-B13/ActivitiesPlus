<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>{{ title }} | Activités+</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Nunito+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/homepage.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/clubs.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">

    <style>
        .detail-grid { display: grid; grid-template-columns: 350px 1fr; gap: 2rem; max-width: 1200px; margin: -80px auto 50px; padding: 0 20px; position: relative; z-index: 10; }
        .profile-card { background: white; padding: 3rem 2rem; border-radius: 20px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); text-align: center; height: fit-content; position: sticky; top: 100px; }
        .avatar-circle { width: 100px; height: 100px; background: #f3e8ff; color: #7209b7; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; font-weight: 800; margin: 0 auto 1.5rem; border: 4px solid white; box-shadow: 0 10px 20px rgba(114, 9, 183, 0.2); }
        .content-card { background: white; padding: 2.5rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05); margin-bottom: 2rem; }
        .section-title { font-family: 'Montserrat', sans-serif; color: #4361ee; font-size: 1.2rem; margin-bottom: 1rem; border-bottom: 2px solid #f0f4ff; padding-bottom: 0.5rem; }
        
        @media (max-width: 900px) { .detail-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <nav class="navbar"><div class="logo">Activités<span>+</span></div></nav>

    <header class="page-header" style="padding-bottom: 120px; background: linear-gradient(135deg, #7209b7, #4cc9f0);">
        <h1><i class="fas fa-chalkboard-teacher"></i> Profil Intervenant</h1>
        <p>Expertise : {{ intervenant.Specialite }}</p>
    </header>

    <div class="detail-grid">
        
        <aside class="profile-card">
            <div class="avatar-circle">
                {{ intervenant.NomIN[0] }}{{ intervenant.PrenomIN[0] }}
            </div>
            <h2 style="font-family: 'Montserrat'; color:#333; margin-bottom:5px;">{{ intervenant.PrenomIN }} {{ intervenant.NomIN }}</h2>
            <span class="tag" style="background:#7209b7; color:white;">{{ intervenant.Specialite }}</span>

            <div style="text-align: left; margin-top: 30px;">
                <p style="margin-bottom: 10px; color:#555;"><i class="fas fa-envelope" style="color:#7209b7; width:20px;"></i> {{ intervenant.EmailIN }}</p>
                <p style="margin-bottom: 10px; color:#555;"><i class="fas fa-phone" style="color:#7209b7; width:20px;"></i> {{ intervenant.TelephoneIN }}</p>
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:30px;">
                <a href="{{ url_for('modifier_intervenant', id=intervenant.CodeIntervenant) }}" style="background:#e0e7ff; color:#4361ee; padding:10px; border-radius:8px; text-decoration:none; font-weight:bold;">Modifier</a>
                <a href="{{ url_for('supprimer_intervenant', id=intervenant.CodeIntervenant) }}" onclick="return confirm('Supprimer ?');" style="background:#fee2e2; color:#ef4444; padding:10px; border-radius:8px; text-decoration:none; font-weight:bold;">Supprimer</a>
            </div>
            <br>
            <a href="{{ url_for('gestion_intervenants') }}" style="color:#888; text-decoration:none;">Retour</a>
        </aside>

        <main>
            <div class="content-card">
                <h3 class="section-title"><i class="fas fa-history"></i> Historique des Interventions</h3>
                
                {% if activites|length < 1 %}
                    <p class="empty-state">Aucune intervention planifiée pour le moment.</p>
                {% else %}
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="text-align:left; color:#888; font-size:0.9rem;">
                                <th style="padding:10px;">Activité</th>
                                <th style="padding:10px;">Date</th>
                                <th style="padding:10px;">Événement Parent</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for act in activites %}
                            <tr style="border-bottom:1px solid #eee;">
                                <td style="padding:15px 10px;">
                                    <strong>{{ act.IntituleE }}</strong><br>
                                    <span style="font-size:0.85rem; color:#7209b7;">{{ act.TypeActiviteE }}</span>
                                </td>
                                <td style="padding:15px 10px;">
                                    {{ act.DateActiviteE.strftime('%d/%m/%Y') }}
                                </td>
                                <td style="padding:15px 10px;">
                                    {% if act.evenement %}
                                        <a href="{{ url_for('detail_evenement', id=act.evenement.CodeEvent) }}" style="color:#4361ee; text-decoration:none; font-weight:bold;">
                                            {{ act.evenement.NomEvent }}
                                        </a>
                                    {% else %}
                                        <span style="color:#aaa;">-</span>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}
            </div>
        </main>
    </div>

    <footer><p>&copy; 2025 Activités+ ENSA Khouribga.</p></footer>
</body>
</html>